% Chapter Template

\chapter{Laminated Composite Material Optimization by New Genetic Algorithm Model} % Main chapter title

\label{Chapter4} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}


\section{Case1: Maximum Strength Optimization}
\input{Figures/chapter4_first_table_composite_material.tex}
\input{Figures/chapter4_first_table_comparsion.tex}

\subsection{Methodology}

\subsection{Result and Discussion}

\section{Case2: Minimum Thickness Optimization}
In this case, the mentioned NGAM in chapter three is taken to minimize thickness(or
weight) of mid-plane symmetric composite laminate subject to in-plane loading.
Fiber orientation and ply thickness are chosen as design variables, the proposed
Tsai-wu and the maximum stress criteria are employed to determine whether
load bearing capacity is exceeded or not.

\subsection{Methodology}

The optimization problem can be formulated as searching the optimal stacking
sequence of composite laminate. There are two design variables in this problem,
the angles in the laminate, and the number of layers that each fiber orientation
has. The final objective function is given as

\begin{equation}
	\begin{split}
    	F  &= 2t_0 \sum_{k=1}^n n_k  \textstyle{,}\\
    	   &SF_{MS} \geq 1 \textstyle{,} \\
    	   &SF_{TW} \geq 1 \textstyle{.}
	\end{split} 
\end{equation}

The first term represents the total thickness of the composite laminates, $t_0$
is the ply thickness; $n_k$ is the number of plies in the kth lamina, in which
the fiber orientation is $\theta_k$. The constraints here are two safety
factors should not less than 1, which means  $SF_{MS} \geq 1$, and $SF_{TW} \geq
1$, respectively.

\subsection{Encoding}
Due to the simplicity and efficiency of float representation, this encoding
method is implemented to represent a possible solution. As shown in Figure \ref{GA:operator}
 (a), these two chromsomes represent a $[+8_{7}/-9_{2}]_s$
carbon T300/5308 laminated composite, and $[+19_{4}/-36_{6}]_s$, respectively.
Becasue the laminate adopted in this paper is symmetric to its mid-plane, so
only half needs to be encoded.

\afterpage{
\input{Figures/chapter4_second_ga_operator.tex}
\clearpage
}

\subsection{Selection}
The purpose of the selection operator is to chose mating pool to produce
alternative solutions of better fitness. Traditional methods of selecting
strategies only take the fitness of individuals into acount, however, due to 
the existance of constraint, various selection schemes are implemented to
selecet the mating set. Based on different selection schemes, the parents of
next generation can be divided into  three groups: proper groups, active groups,
and potential groups according to different selecting methods. 

Proper parents mean in which individual fullfils the constraints, which are
chosen by the individual's fitnees, individuals with better fitness are more
likely to be chosen if they fit the constraint; active groups means that
individual is supposed to be always exist in the parents during the GA, which
are selected by fitness, ignoring the constraint; The individuals from active
group may not correspond to feasible solutions, but their existance enriches the
variety of the gene clips.  Potential groups means that they are likely to turn
into proper individual after a couple of generations, and potential individuals
are chosen by constraint function, the more the individual fulfils the
constraint, the more possiblity it will be selected.

\subsection{Crossover}
The crossover operator happens among these three groups. the child of two proper
groups are more likely to be a proper individual which can be used to obtain a
alternative feasible solution. the child of an active individual and a potential
individual can significantly change the gene of active individual's chromsome,
which makes the individual evolve toward a new direction. The offspring of two
active individuals are more likely to be an active individual, which can maitain
the active group.  The figure.\ref{GA:operator} (b) shows two children $O_1$
and $O_2$ from two parents $P_1$ and $P_2$, each angle $C_a$ and it's length 
$C_l$ of a child are obtained by the following formula

\begin{align} 
	\begin{cases}
	C_a &= (P1_a + P2_a)/2 \\
	C_l &= (P1_l + P2_l)/2 
\end{cases} \textstyle{.}
\end{align}

\subsection{Mutation}
A mutation direction is imposed on the mutation operator which to make sure the
individual evolving toward the right direction. The mutation direction, denoted
by $md$, is a n dimensional vector corresonding to the number of constraints, it
is decided by the constraint thresholds $CT_i$ and the current individual's
constraint value, denoted as $CV_i$,  The mutation vector can be obtained by the
following formula

\resizebox{.9\linewidth}{!}{
	$\text{md} = [CT_1, \cdots, CT_{n-1}, CT_n] -  [CV_0, \cdots, CV_{n-1}, CV_n]$
}

During the operator, the mutation procedure is consist of two phases: the length
mutation of the chromsome, and the angle mutation of the chromsome.  Becasue the
chromsome's length is positive correlated with the individual's fitness, the
coefficient of length mutation denoted by $C_l$, if $\sum_{i=1}^{N}{CT_i}$ great
than $\sum_{i=1}^{N}{CV_i}$ , the mutation length is restricted to the range
$[0,(C_l \sum_{i=1}^{N}{(CT_i-CV_i)})/N]$, which means increase the chromsome's
length;Assuming a $[+13_6/-27_4]_s$ T300/5308 carbon/epoxy composite
laminate under the loading $N_{x} = N_{y} = 10$ MPa m, it's property as shown
in table \ref{tab:T300/5308}. According to CLT and
failure theory, the two safety factors $SF_{MS}$ and $SF_{TW}$ are  0.0539, and
0.0540, respectively. So the mutation vector and is $[0.9461,0.9460]$, assuming
the length mutation coefficient is 20, so the mutation range is from 0 to 18. A
random number is generated from the range $[0, 18]$, supposing the outcome is
13, then a length generator is used to a list, the it's sum is 13, suppose the
list is [5, 8], the laminate after mutation is $[13_{11}/-27_{12}]_s$.

If the $\sum_{i=1}^{N}{CT_i}$ less than $\sum_{i=1}^{N}{CV_i}$, the
mutation length is restricted to the range $([\sum_{i=1}^{N}{CT_i-CV_i})/N,0]$,
which means the individual's fitness exceeds the threshold value, and decrease
the chromsome's length.  Assuming a $[+33_{35}/-29_{26}]_s$ T300/5308 laminate
is under loading $N_{x}=10$ MPa, and $N_{y}=5$ MPa, then, it's $SF_{MS}$
constraint and $SF_{TW}$ values are  1.0912, 1.0747, respectively.
because the length mutation is 20, so the mutation range is from -2 to 0. This
would decrease the chromsome's length. 

\begin{align}
	\text{LM} = 
	\begin{cases}
		\resizebox{.35\textwidth}{!}{$[0,(C_l \sum_{i=1}^{N}{(CT_i-CV_i)})/N], \text{ if }  \sum_{i=1}^{N}{CT_i} > 
		\sum_{i=1}^{N}{CV_i}$}\\
		\resizebox{.35\textwidth}{!}{$[(C_l \sum_{i=1}^{N}{(CT_i-CV_i)})/N,0], \text{ if }  \sum_{i=1}^{N}{CT_i} < 
		\sum_{i=1}^{N}{CV_i}$}\\
	\end{cases} 
\end{align}

The relationship between the angles in the composite laminate and the
chromsome's fitness is unclear, so the mutation direction of chromsome's angle
is random. The coefficient angle mutation is $C_a$, the angle mutation range is
$[0,C_a \sum_{i=1}^{N}{(|CT_i-CV_i|)}]$ or $[C_a
\sum_{i=1}^{N}{(-|CT_i-CV_i|)},0]$. It is can be written as

\begin{align}
	\text{P(AM)} =  
	\begin{cases}
		0.5, \text{ AM = }[0,C_a \sum_{i=1}^{N}{(|CT_i-CV_i|)}] \\ 
	    0.5, \text{ AM = }[C_a \sum_{i=1}^{N}{(-|CT_i-CV_i|)},0]
	\end{cases} \textstyle{.}
\end{align}


\input{Figures/chapter4_second_lay_up_two_angle.tex}

\subsection{Result and Discussion}
In present study, the T300/5308 graphite/epoxy material is used in the
lay-up sequence optimization, and it's properties as shown in
table.\ref{tab:T300/5308}. Two constraints are imposed on the composite
laminates which are the safety factor $SF_{MS}$ , and safety factor $SF_{TW}$,
and the threshold values for both of them is 1. The constraint values of an
individual are $CV_1$ and $CV_2$. So the mutation vector here is a two
dimensional vector $[1 - CV_1, 1 - CV_2 ]$, and the coefficient of length
mutation $C_l$ and angle mutation $C_a$ are  20 and 10 ,respectively.

To verify the reliablity of proposed method, two conditions are concerned: the
first is only two distinct fiber orientation angles in the composite material;
the second involves three distinct ply angles within the optimization process.
In each situation, first, we present the search process by plotting revelvant
indicators, such as the fitness, strength ratio, and angle. Then, the optimum
lay-ups under various loading cases is discussed.


\afterpage{
\begin{figure}[!htb]
	\centering
		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_two_distinct_angle_fitness_and_sr.png}
		\end{subfigure}

		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_two_distinct_angle_angle_change.png}
		\end{subfigure}

		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_two_distinct_angler_number_change.png}
		\end{subfigure}
	\caption{Two distinct angles}
	\label{fig:two_angles}
\end{figure}
\clearpage
}


Figure \ref{fig:two_angles} (a) shows how the optimal individual's fitness and
strength ratio evolves during the GA process. The solid curve shows the fitness
value, the dashed curve shows the Tsai-wu safety factor, and the dotted curve
shows MS safety factor. If the smaller strength ratio fullfils the constraint,
this laminate must satisfy all the constraints, for simplicity, only the smaller
strength ratio is presented in the figure\ref{fig:three_angles} (a). The method
to chose optimal individual considering two following situations, if no
individual in the current population meets constraint, the one with biggest
fitness is selected as the optimal individual; if there are one or multiple
individuals fullfils requirement, the one with smallest fitness is chosen which
means the smallest one has the biggest priority.  Figure \ref{fig:two_angles}
(b) and \ref{fig:three_angles} (b) show how the every fiber orientation changes , and
Figure \ref{fig:two_angles} (c) and \ref{fig:three_angles} display how the
number of each angles varies.

At the beginning of this GA process, the fitness curves increases very quickly,
becasue individual's two strength ratios are very small, so the difference
between the individual's fitness and the imposed constraint threshold is a big
positive number, so the range of mutaion length is from 0 to $C_l(CT_0 - CV_0 +
CT_1 - CV_1)/2$.  The length of individual increases by n, which is random
number between 0 and $C_l(CT_0 - CV_0 + CT_1 - CV_1)/2$ . As can be seen from
Figure \ref{fig:two_angles} (a), both of optimal individual's fitness and
strength ratio increases very quickly.  The range of angle mutation is from 0 to
$C_a(CT_0 - CV_0 + CT_1 - CV_1)/2$, and the number of each angle also changes
violently. The Figure.\ref{fig:two_angles} (a) and \ref{fig:three_angles} (a) show
this property at the initial stage.  During this stage, increasing individual's length playing a
major role in increasing individual's fitness.

After a couple of generations, the optimal individual's fitness get bigger, and
the difference between individual's fitness and constraint threshold get
smaller. The range of mutation length turn smaller. At
this stage, simply increase the individual's length doesn't make much difference
in improve individual's fitnees, and a better composite laminates lay-up can
dramaticly change the optimal individual's fitness. That's why the fitness curve
oscillated violently in this stage.  At the same time, the strength ratio curve
kept growing smoothly. But the growing speed got more smaller.

When GA comes to its last phase, GA finds individuals that meet all the
constraints.  Now the optimal individual's fitness is greater than the safety
factor. The range of mutation length is from $C_l(CT_0 - CV_0 + CT_1 - CV_1)/2$
to 0. It means individuals need to decrease it's length and improve its internal
structure to meet the constraint. That's why the fitness of optimal individual
kept decreaing, however, the strength ratio curve still is greater then safety
factor.

\afterpage{
\begin{figure}[!htb]
	\centering
		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_three_distinct_angle_fitness_and_sr.png}
		\end{subfigure}

		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_three_distinct_angle_angle_change.png}
		\end{subfigure}

		\begin{subfigure}[b]{0.8\linewidth}
			\includegraphics[width=\linewidth]{Figures/chapter4_second_three_distinct_angler_number_of_angle.png}
		\end{subfigure}
	\caption{three distinct angles}
	\label{fig:three_angles}
\end{figure}
\clearpage
}

\input{Figures/chapter4_second_lay_up_three_angle.tex}

\input{Figures/chapter4_second_lay_up_comparsion.tex}

Table.\ref{tab:comparision} shows the comparison with the result obtained by
direct search simulated annealing(DSA) algorithm which is proposed by Akbulut
and Sonmez\cite{akbulut2008optimum}.  Both of variant GA and DSA are able to
find feasible solution, but when loading is $N_x=80$, $N_y=5$ MPa m, variant GA
gets a better solution than DSA. In the case that loadings are $N_x=20$, $N_y=5$ MPa m,
and $N_x=120$, $N_y=5$ MPa m,  the proposed GA offers an alternative. Compared
with DSA method, the last advantage of variant GA is the number of layers
doesn't have to be an even number.

\section{Summary}
In this paper, we reviewed the use of variant GA for the optimal design of composite
laminated material under in-plane loading based on Tsai-wu and maximum stress
failure criteria. GA is proposed to search the optimal lay-up for laminated
composite under different loading cases. Two situations are considered under the same
loading, a set of two distinct angles, and three distinct angles. 

By setting the constant values of length mutaion coefficient and angle mutation
coefficient at the beginning, the convergence speed of search process can be
controlled in an explicit way; During the optimization process, GA can adjust
its length mutation range and angle mutation range based on the difference
between individual's constraint values and constraint thresholds.  

Finally, comparison of previous research and current result are presented. In
some cases, the proposed GA in this paper is better off than DSA method.
However, there is still many works to study within this GA, such as the
fine-tuning of parameters taken in this GA.



